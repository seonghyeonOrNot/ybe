# Working Agreement

Output language: Korean

모든 결과는 다음 규칙을 따른다:

1. 표 기반 구조 우선
2. 정책/상태/예외/권한/감사로그/테스트/이벤트는 표로 정리
3. 계산값/기대결과는 숫자(정수)로 명시
4. 대상 독자: PM / 개발 / QA / 운영
5. 특정 기능(예: 휴가)에 종속된 용어 대신, 상태/이벤트/권한/정책/정합성 같은 범용 프레임을 사용

라벨 기반 agent 실행 시:
- 이슈 본문을 입력으로 삼아, **질문으로 끝내지 말고** 가정을 두고 완성된 결과를 작성한다.
- 결과는 **Markdown**으로 작성하고, **이슈 코멘트에 바로 붙여넣기 가능한 형태**로 출력한다.
- 섹션 제목 포함, 실무 문서 형태 유지

## Source of Truth (Catalog)

다음 경로의 TSV를 **근태 도메인 기준 데이터(Source of Truth)** 로 사용한다:

- data/catalog/attendance/*.tsv

우선순위:
1) TSV 데이터
2) 이슈/요구사항 본문
3) 기타 문서/추정

TSV를 기반으로 반드시 생성/점검해야 하는 산출물:
- 상태 정의 (UI 배지/상태 판정 기준 포함)
- 근무유형 설정 스키마 (필드/타입/기본값/필수/제약조건)
- 정책/옵션 (GPS/비콘/근무지 포함)
- 지표 정의 및 계산 기준 (단위 포함)
- 유효성 검사 규칙 (constraints → validation rule로 변환)
- QA 시나리오/테스트 케이스 (happy/edge/error 포함)
- API 스키마 초안 (request/response 필드 및 타입 매핑)
- 이벤트/감사로그 후보 (상태 변경/정책 변경/승인 문서 반영 등)

출력 규칙:
- TSV의 `canonical_key`를 문서/스키마/테스트에서 **식별자 키**로 사용한다.
- 시간/기간/반경 등 단위는 TSV의 `value_unit`/`output_unit`을 우선한다.
- 제약조건은 TSV의 `constraints`를 **머신리더블 규칙**으로 먼저 정리한 뒤, 사용자 안내 문구로 변환한다.

