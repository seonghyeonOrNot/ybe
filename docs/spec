# 휴가 관리 시스템 명세서

## 개요
관리자가 직원들에게 휴가를 수동으로 부여할 수 있는 시스템입니다.

## 핵심 요구사항

### 1. 사용자 구분
- **부여 대상자**: 관리자가 수동으로 휴가를 부여할 수 있는 직원 목록
- **비대상자**: 휴가 수동 부여 대상이 아닌 직원 목록

### 2. 관리자 기능
- 부여 대상자 목록 조회
- 비대상자 목록 조회
- 특정 직원에게 휴가 수동 부여
- 휴가 부여 이력 조회
- 직원별 휴가 잔여일수 조회

### 3. 휴가 부여 규칙
- 관리자만 수동 부여 가능
- 부여 대상자에게만 휴가 부여 가능
- 부여 시 휴가 일수, 사유, 유효기간 지정
- 부여 이력 자동 기록 (감사 로그)

## 데이터 모델

### User (직원)
```
- id: 고유 식별자
- name: 이름
- email: 이메일
- department: 부서
- is_eligible: 부여 대상 여부
- created_at: 생성일시
- updated_at: 수정일시
```

### VacationBalance (휴가 잔액)
```
- id: 고유 식별자
- user_id: 직원 ID (외래키)
- total_days: 총 휴가 일수
- used_days: 사용한 휴가 일수
- remaining_days: 잔여 휴가 일수
- year: 연도
- updated_at: 수정일시
```

### VacationAssignment (휴가 부여 기록)
```
- id: 고유 식별자
- user_id: 직원 ID (외래키)
- admin_id: 관리자 ID (외래키)
- days_granted: 부여한 휴가 일수
- reason: 부여 사유
- valid_from: 유효 시작일
- valid_until: 유효 종료일
- created_at: 부여일시
```

### Admin (관리자)
```
- id: 고유 식별자
- name: 이름
- email: 이메일
- role: 역할 (ADMIN)
- created_at: 생성일시
```

## 비즈니스 로직

### 휴가 부여 프로세스
1. 관리자가 부여 대상자 목록에서 직원 선택
2. 부여할 휴가 일수와 사유 입력
3. 유효기간 설정 (선택적)
4. 시스템이 직원의 휴가 잔액 업데이트
5. 부여 이력 기록

### 유효성 검증
- 관리자 권한 확인
- 대상자 자격 확인 (is_eligible = true)
- 부여 일수 양수 확인
- 사유 필수 입력 확인

## 추가 고려사항

### 확인 필요 사항 (Notion 페이지 참조)
- [ ] 부여 대상자 결정 기준은 무엇인가?
- [ ] 휴가 일수 제한이 있는가?
- [ ] 연차 유효기간은 어떻게 관리하는가?
- [ ] 휴가 사용 신청 프로세스도 구현해야 하는가?
- [ ] 알림 기능이 필요한가?

### 향후 확장 가능성
- 자동 휴가 부여 규칙
- 휴가 사용 신청 및 승인
- 캘린더 통합
- 리포트 및 통계
- 이메일 알림

## 우선순위
- **P0 (이번 스프린트)**:
  - 관리자 대시보드 (부여 대상자/비대상자 목록)
  - 휴가 수동 부여 기능
  - 부여 이력 조회

- **P1 (다음 스프린트)**:
  - 휴가 잔액 조회
  - 감사 로그 상세 조회

- **P2 (향후)**:
  - 휴가 사용 신청
  - 자동화 규칙

## 참고
- Notion 페이지: https://www.notion.so/2f8c0f61d074802b96b9ea0a7b1144ac
- Spec ID: TSK1-YBE1
