# HR-007 연차촉진 기능 고도화 - 최종 종합 보고서

## 문서 정보

| 항목 | 내용 |
|------|------|
| 이슈 ID | HR-007 |
| 이슈명 | 연차촉진 기능 고도화 |
| 작성일 | 2026-02-05 |
| 참여 에이전트 | Policy PM, UX Architect, Risk & Compliance, QA Engineer, Data Analyst, Tech Communicator |
| 버전 | v1.0 |

---

## Executive Summary

고객 VOC 52건 분석을 기반으로 6개 관점(정책/UX/리스크/QA/데이터/개발)에서 연차촉진 기능 고도화를 분석하였습니다. 핵심 개선 방향은 **계획서 제출과 연차 차감의 분리**, **이월연차 촉진 대상 제외**, **1년 미만자 월별 연차 정확한 관리**, **관리자 100명+ 대응 UX 강화**입니다.

---

## 1. Top 5 충돌/논쟁 포인트

### 논쟁 1: 촉진 대상 산정 시 승인된 미사용연차 포함 여부

| 관점 | 입장 |
|------|------|
| **Policy PM** | PLANNED 상태 연차를 촉진 대상에 포함 (공식: 발생 - USED - ADVANCED + PLANNED) |
| **Risk & Compliance** | 실제 사용(USED)만 제외하고 나머지 전부 포함이 법적으로 안전 |
| **QA Engineer** | 취소 시 재계산 로직 필요 → 복잡도 증가 우려 |
| **Tech Communicator** | 상태 전이에 따른 재계산 배치 필요 |

**결정 필요**: 1차 촉진 시점에 신청/승인 상태 연차를 촉진 대상에서 제외할 것인가?

| 옵션 | 설명 | 장점 | 단점 | 리스크 |
|------|------|------|------|--------|
| **A: USED만 제외 (권장)** | 실제 사용 완료된 연차만 촉진 대상에서 제외 | 법적 안전성 최고, 누락 위험 없음 | 이미 승인된 연차도 촉진 발송 → 사용자 혼란 가능 | Low |
| **B: USED+PLANNED 제외** | 사용완료 + 계획서 제출 연차 제외 | 사용자 경험 자연스러움 | 취소 시 촉진 누락 위험 → 연차수당 지급 의무 발생 가능 | High |
| **C: 설정 옵션화** | 고객사가 선택 | 유연성 높음 | 개발/QA 부담, 설정 오류 리스크 | Medium |

**최종 권고**: **옵션 A** - 법적 안전성을 최우선으로, USED만 제외. 단, UX에서 "이미 승인된 연차도 포함됩니다" 안내 문구 추가.

---

### 논쟁 2: 이월연차 촉진 의무 여부

| 관점 | 입장 |
|------|------|
| **Policy PM** | 이월연차는 촉진 대상에서 제외 (CARRIED_OVER 상태 정의) |
| **Risk & Compliance** | 법령에 명시 규정 없음 → 포함 권고 (안전 측면) |
| **Data Analyst** | 이월연차 포함/제외 설정에 따른 A/B 테스트 제안 |

**결정 필요**: 이월연차를 촉진 대상에 포함할 것인가?

| 옵션 | 설명 | 장점 | 단점 | 리스크 |
|------|------|------|------|--------|
| **A: 제외 (PM 제안)** | 당해년도 발생 연차만 촉진 대상 | 촉진 대상 명확, CS 문의 감소 | 법적 해석 리스크 존재 | Medium |
| **B: 포함 (Risk 제안)** | 이월연차도 촉진 대상 포함 | 법적 안전성 높음 | 촉진 대상 연차가 늘어나 관리 부담 증가 | Low |
| **C: 고객사별 설정 (권장)** | 포함/제외 옵션 제공 + 법적 리스크 고지 | 유연성 + 법적 보호 | 개발 복잡도 증가 | Low |

**최종 권고**: **옵션 C** - 기본값은 "제외"로 설정하되, 포함 선택 시 법적 리스크 고지. Risk 팀의 면책 동의 프로세스 적용.

---

### 논쟁 3: 계획서 제출 = 연차 차감 분리의 범위

| 관점 | 입장 |
|------|------|
| **Policy PM** | PLANNED 상태 신규 도입, 차감 없는 계획서 제출 |
| **UX Architect** | 설정 옵션으로 "즉시 차감" / "차감 안함" 제공, "차감 안함" 권장 |
| **Tech Communicator** | `planned_days` vs `used_days` 컬럼 분리, 마이그레이션 필요 |
| **QA Engineer** | 기존 데이터 마이그레이션 검증 필수 (PLANNED 상태 원복) |

**결정 필요**: 기존 "계획서 제출 = 차감" 데이터를 어떻게 마이그레이션할 것인가?

| 옵션 | 설명 | 장점 | 단점 | 리스크 |
|------|------|------|------|--------|
| **A: 일괄 원복 (권장)** | 미사용 상태의 계획서 차감분을 일괄 원복 | 데이터 정합성 보장 | 원복 과정에서 오류 가능 | Medium |
| **B: 신규 건부터 적용** | 기존 데이터는 유지, 신규 계획서부터 분리 | 마이그레이션 리스크 없음 | 기존/신규 혼재로 장기 혼란 | High |
| **C: 고객사별 선택** | 마이그레이션 시점을 고객사가 선택 | 유연성 | 운영 복잡도 극대화 | High |

**최종 권고**: **옵션 A** - 일괄 원복. Tech Communicator의 마이그레이션 스크립트 + QA의 검증 매트릭스 활용. 롤백 계획 필수.

---

### 논쟁 4: 1년 미만자 연차 소멸 시점

| 관점 | 입장 |
|------|------|
| **Policy PM** | 입사일 기준 1년 후 소멸 (법적 원칙) |
| **Risk & Compliance** | 12/31 연장 설정 시 법적 경고 필수, 촉진 시기 자동 재계산 |
| **QA Engineer** | 월별 발생/소멸 타임라인 조합 테스트 22건 P0 |
| **UX Architect** | "소멸 6개월 전 = YYYY-MM-DD" 명확한 날짜 표기 |

**결정 필요**: 1년 미만자 소멸 시점을 입사일 기준 고정할 것인가, 설정 가능하게 할 것인가?

| 옵션 | 설명 | 장점 | 단점 | 리스크 |
|------|------|------|------|--------|
| **A: 입사일 기준 고정** | 법적 원칙 준수 | 단순, 안전 | 고객사 요구 미충족 가능 | Low |
| **B: 설정 가능 + 경고 (권장)** | 변경 가능하되 법적 리스크 고지 | 유연성 + 법적 보호 | 촉진 시기 재계산 로직 필요 | Medium |

**최종 권고**: **옵션 B** - 기본값은 입사일 기준. 변경 시 Risk 팀의 면책 동의 프로세스 적용 + 촉진 시기 자동 재계산.

---

### 논쟁 5: 촉진 완료 판단 기준

| 관점 | 입장 |
|------|------|
| **Risk & Compliance** | 발송/수신/열람/제출 각 단계별 타임스탬프 기록 필수 (R-04 High 리스크) |
| **Tech Communicator** | `leave_audit_logs` 테이블로 전 단계 이력 관리 |
| **Data Analyst** | 17개 이벤트 설계로 전 과정 추적 |
| **UX Architect** | 대시보드에서 단계별 진행 현황 시각화 |

**결정 필요**: 촉진 "완료"를 어느 시점으로 볼 것인가?

| 옵션 | 설명 | 장점 | 단점 | 리스크 |
|------|------|------|------|--------|
| **A: 발송 완료 시점** | 회사가 발송만 하면 완료 | 단순 | 법적 증빙력 약함 | High |
| **B: 수신 확인 시점** | 직원이 열람 확인 시 완료 | 법적 증빙력 중간 | 미열람 시 완료 불가 | Medium |
| **C: 계획서 제출 또는 지정통보 확인 시점 (권장)** | 1차 제출 완료 또는 2차 지정통보 + 소멸일 도래 시 완료 | 법적 증빙력 높음 | 복잡도 높음 | Low |

**최종 권고**: **옵션 C** - 법적 완전성 확보. 발송/수신/열람/제출 전 단계 타임스탬프 기록 + 전자서명 고려.

---

## 2. 단계적 실행 계획

### Phase 1: 기반 구축 (스키마 변경 + 핵심 로직)

| 순서 | 작업 | 담당 | 선행조건 |
|------|------|------|----------|
| 1-1 | DB 스키마 변경 (planned_days, advance_used_days, is_promotion_target 추가) | Backend | - |
| 1-2 | 연차 상태값 7개 + 촉진 상태값 9개 ENUM 정의 | Backend | 1-1 |
| 1-3 | 촉진 대상 연차 계산 로직 구현 (이월 제외, 당겨쓰기 차감) | Backend | 1-2 |
| 1-4 | 감사로그 테이블 및 기록 로직 구현 | Backend | 1-1 |
| 1-5 | Unit Test 작성 (계산 로직, 상태 전이) | QA | 1-3 |

### Phase 2: 데이터 마이그레이션

| 순서 | 작업 | 담당 | 선행조건 |
|------|------|------|----------|
| 2-1 | 기존 데이터 백업 (전체 DB 스냅샷) | DBA | 1-5 Pass |
| 2-2 | 계획서 차감 분리 마이그레이션 (PLANNED 상태 원복) | Backend | 2-1 |
| 2-3 | 이월연차 촉진 제외 마이그레이션 (EXEMPTED 처리) | Backend | 2-1 |
| 2-4 | 데이터 정합성 검증 | QA | 2-2, 2-3 |
| 2-5 | 마이그레이션 검증 리포트 승인 | PM | 2-4 |

### Phase 3: API + UI 개발

| 순서 | 작업 | 담당 | 선행조건 |
|------|------|------|----------|
| 3-1 | 촉진 현황 조회/발송/계획서 API 5개 구현 | Backend | 2-5 |
| 3-2 | 관리자 설정/대상자/대시보드 페이지 구현 | Frontend | 3-1 |
| 3-3 | 사용자 팝업/계획서 작성/조회 페이지 구현 | Frontend | 3-1 |
| 3-4 | 팝업 닫기 동작 정상화 (X, ESC, 외부클릭, 뒤로가기) | Frontend | 3-3 |
| 3-5 | 자동저장/임시저장 구현 | Frontend | 3-3 |
| 3-6 | 필터/검색/엑셀다운로드 구현 | Full-stack | 3-2 |

### Phase 4: 배치 + 알림

| 순서 | 작업 | 담당 | 선행조건 |
|------|------|------|----------|
| 4-1 | 촉진 대상자 일일 집계 배치 | Backend | 3-1 |
| 4-2 | 1년 미만자 월별 연차 부여 배치 | Backend | 3-1 |
| 4-3 | 촉진 발송 예약 배치 | Backend | 4-1 |
| 4-4 | 알림 템플릿 (이메일/SMS/카카오) 구현 | Backend | 4-3 |

### Phase 5: QA + 롤아웃

| 순서 | 작업 | 담당 | 선행조건 |
|------|------|------|----------|
| 5-1 | P0 케이스 22건 테스트 | QA | Phase 3, 4 완료 |
| 5-2 | P1 케이스 14건 테스트 | QA | 5-1 Pass |
| 5-3 | 회귀 테스트 8건 | QA | 5-2 |
| 5-4 | Alpha 롤아웃 (1% - 내부 + 파트너 2사) | DevOps | 5-3 Pass |
| 5-5 | Beta 롤아웃 (5% → 15%) | DevOps | 5-4 Go 판정 |
| 5-6 | GA 롤아웃 (40% → 100%) | DevOps | 5-5 Go 판정 |

### 롤백 전략

| 상황 | 롤백 범위 | 방법 |
|------|-----------|------|
| 마이그레이션 실패 | 전체 DB | Phase 2-1 스냅샷 복원 |
| 일부 데이터 오류 | 해당 테이블 | 부분 롤백 스크립트 |
| 비즈니스 로직 오류 | 기능 | Feature Flag OFF (즉시) |
| 롤아웃 단계 실패 | 트래픽 | 이전 단계로 롤백 |

---

## 3. 체크리스트

### 3.1 개발 체크리스트 (10항목)

- [ ] DB 스키마 변경 완료 (planned_days, advance_used_days, is_promotion_target)
- [ ] 연차 상태값 7개 + 촉진 상태값 9개 정의 및 구현
- [ ] 촉진 대상 연차 계산 공식 구현 (이월 제외, 당겨쓰기 차감)
- [ ] API 5개 구현 (조회, 발송, 계획서 제출, 수정, 다운로드)
- [ ] 배치 6개 구현 (대상자 집계, 월별 부여, 발송 예약, 소멸 처리, 이월 처리, 정산)
- [ ] 감사로그 기록 (12개 필드, 3년 보존)
- [ ] 마이그레이션 스크립트 작성 + 검증 (STG 환경)
- [ ] 롤백 스크립트 준비 (3가지 시나리오)
- [ ] Feature Flag 구현
- [ ] 성능 테스트 (10,000명 대상자 기준)

### 3.2 QA 체크리스트 (10항목)

- [ ] P0 정상 케이스 7건 Pass (TC-N-001~007)
- [ ] P0 예외 케이스 6건 Pass (TC-E-001, 004~006, 009~010)
- [ ] P0 회귀 케이스 6건 Pass (TC-R-001~006)
- [ ] P0 조합 케이스 12건 Pass
- [ ] 연차 계산 검증 매트릭스 7개 시나리오 Pass (Case A~G)
- [ ] 마이그레이션 전/후 데이터 정합성 검증 Pass
- [ ] 연차현황-촉진메뉴 데이터 일치 검증 Pass
- [ ] 엑셀 다운로드 데이터 일치 검증 Pass
- [ ] Unit Test 커버리지 80% 이상
- [ ] Exit Criteria 충족 (P0=100%, P1>=95%, 회귀=100%)

### 3.3 운영/컴플라이언스 체크리스트 (10항목)

- [ ] 1차/2차 촉진 시기 계산 로직이 근로기준법 제61조 충족
- [ ] 촉진 발송/수신/열람/제출 타임스탬프 기록 확인
- [ ] 법적 리스크 고지 및 면책 동의 프로세스 구현
- [ ] 운영팀 대응 스크립트 3개 시나리오 교육 완료
- [ ] 고객 안내 문구 법무팀 검토 완료
- [ ] 리포트 5종 출력 기능 (대상자, 이행, 정산, 감사, 법적증빙) 확인
- [ ] 이벤트 트래킹 17개 이벤트 수집 확인
- [ ] 대시보드 3종 (관리자, 운영, PM) 구축 확인
- [ ] Go/Watch/No-Go 판단 기준 6개 영역 모니터링 설정
- [ ] 관리자 변경 내역 공지 + 사용자 가이드 배포 완료

---

## 4. 리스크 Top 5

| 순위 | 리스크 ID | 리스크 항목 | 심각도 | 발생 가능성 | 완화 방안 |
|------|----------|------------|--------|------------|----------|
| 1 | R-01 | **1차 촉진 미포함 연차의 2차 대상 판단 오류** → 연차수당 지급 의무 발생 | High | 높음 | USED만 제외하는 보수적 로직 적용 |
| 2 | R-02 | **1년 미만자 연차 소멸 시점 오적용** → 촉진 절차 무효화 | High | 높음 | 입사일 기준 기본값 + 변경 시 법적 경고 |
| 3 | R-03 | **사용기한 연장으로 촉진 무효화** → 촉진 시기 법적 요건 불충족 | High | 중간 | 연장 시 촉진 시기 자동 재계산 |
| 4 | R-04 | **촉진 완료 판단 기준 불명확** → 노동위원회 분쟁 | High | 높음 | 전 단계 타임스탬프 + 전자서명 |
| 5 | R-07 | **고객사별 상이한 설정 혼선** → 운영팀 대응 오류 | Medium | 높음 | 설정 현황 대시보드 + 변경 이력 관리 |

---

## 5. 에이전트별 산출물 요약

| 에이전트 | 파일 | 핵심 산출물 |
|----------|------|------------|
| **A. Policy PM** | [A_policy_pm.md](A_policy_pm.md) | 연차 상태값 7개, 촉진 상태값 9개, 휴가 수명주기 표, 5역할 권한 매트릭스, 마이그레이션 체크리스트 |
| **B. UX Architect** | [B_ux_architect.md](B_ux_architect.md) | 관리자/사용자 플로우, 6개 화면 와이어프레임, 팝업 닫기 정상화, Empty/Error/권한없음 케이스, VOC 기반 가이드 10개 |
| **C. Risk & Compliance** | [C_risk_compliance.md](C_risk_compliance.md) | 리스크 12건 (High 4, Med 5, Low 3), 법적 논쟁 5개 영역, 감사로그 구조, 운영 대응 스크립트 3개, 면책 문구, 컴플라이언스 체크리스트 10항목 |
| **D. QA Engineer** | [D_qa_engineer.md](D_qa_engineer.md) | 정상 7건 + 예외 10건 + 회귀 8건 = 25개 기본 TC, 조합 15건 + 특수 8건, 수치 계산 예시, 우선순위 (P0: 22, P1: 14, P2: 2), 자동화 추천 |
| **E. Data Analyst** | [E_data_analyst.md](E_data_analyst.md) | KPI 15개 (도입효과 4, 운영효율 5, 만족도 6), 이벤트 17개, 대시보드 3종, 5단계 롤아웃, A/B 테스트 4건, Go/No-Go 기준 |
| **F. Tech Communicator** | [F_tech_communicator.md](F_tech_communicator.md) | 테이블 4개 (leaves, leave_promotions, promotion_plans, leave_audit_logs), API 5개, 의사코드 4개 함수, 2-Phase 마이그레이션, 배치 6개 |

---

## 6. 다음 단계 (Action Items)

| 우선순위 | 액션 | 담당 | 기한 |
|----------|------|------|------|
| 1 | 논쟁 포인트 5개 의사결정 회의 | PM + 법무 + 개발리드 | 즉시 |
| 2 | DB 스키마 변경 리뷰 | Backend 리드 + DBA | 의사결정 후 |
| 3 | 마이그레이션 스크립트 작성 + STG 검증 | Backend + QA | 스키마 확정 후 |
| 4 | UI 디자인 리뷰 (와이어프레임 기반) | PM + 디자이너 | 병렬 진행 |
| 5 | 법무팀 면책 문구 / 안내 문구 검토 | 법무 | 병렬 진행 |
| 6 | QA 테스트 데이터 세트 준비 | QA | Phase 2 전 |
| 7 | 이벤트 트래킹 코드 삽입 계획 | Data + Frontend | Phase 3 시작 시 |
| 8 | 운영팀 대응 스크립트 교육 | PM + CS | GA 전 |

---

*본 문서는 6개 서브 에이전트의 분석 결과를 종합한 최종 보고서입니다.*
*각 상세 내용은 개별 에이전트 문서를 참조하세요.*
