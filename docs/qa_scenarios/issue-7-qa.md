# 전자결재 시스템 QA 시나리오

## 카탈로그 참고 결과

| feature_id | 대메뉴 | 중메뉴 | 소메뉴 | 요약 |
|------------|--------|--------|--------|------|
| MOB-SCH-1 | 메인 | 오늘 출장/외근 일정 | 일정 요약 정보 | 오늘 예정된 출장과 외근의 총 건수를 상단에 노출함. |
| MOB-SCH-3 | 메인 | 오늘 출장/외근 일정 | 일정 노출 제어 | X 버튼 클릭 시 해당 일정 항목을 리스트에서 즉시 숨김 처리함. |
| MOB-SCH-4 | 메인 | 오늘 출장/외근 일정 | 리스트 페이징 | 등록된 일정의 개수가 3개를 초과할 경우 페이징 처리를 통해 화면 길이를 조절함. |
| USR-APR-6 | 전자결재 | 기안서 작성 | 출장신청서 - 신청 시간 개별 설정 | 개별 설정 토글 활성화 시, 신청 기간의 모든 날짜가 리스트 형태로 나열되어 각 날짜별로 독립적인 시작/종료 시간 및 근무지 구분을 설정할 수 있음. |
| USR-APR-8 | 전자결재 | 기안서 작성 | 출장신청서 - 휴게 및 근무 시간 | 근로기준법에 따라 휴게 시간이 자동 계산되어 노출되며, 신청 사유는 캘린더 일정 등록 시 제목으로 사용됨. |

## 정상 시나리오 (Normal Cases)

### TC-001: 출장신청서 작성 - 기본 정보 입력
- **Given**: 사용자가 웹 환경에서 전자결재 > 기안서 작성 > 출장신청서 화면에 접근한 상태
- **When**: 제목 "서울 본사 방문", 신청 기간 "2026-02-10 ~ 2026-02-11", 신청 시간 "09:00 ~ 18:00"을 입력하고 상세 내용을 작성한 후 상신 버튼을 클릭
- **Then**: 기안서가 성공적으로 상신되고, 결재선 지정자에게 푸시 알림이 발송되며, "상신 완료" 메시지가 표시됨

### TC-002: 출장신청서 작성 - 휴게 시간 자동 계산
- **Given**: 사용자가 출장신청서 작성 화면에서 근무 시간을 입력하는 상태
- **When**: 신청 시간을 "09:00 ~ 17:00" (8시간)으로 입력
- **Then**: 근로기준법에 따라 휴게 시간이 자동으로 1시간으로 계산되어 표시됨

### TC-003: 출장신청서 작성 - 개별 설정 기능 사용
- **Given**: 사용자가 출장신청서 작성 화면에서 신청 기간을 "2026-02-10 ~ 2026-02-12"로 선택한 상태
- **When**: '개별 설정' 토글을 활성화
- **Then**: 신청 기간의 모든 날짜(2026-02-10, 2026-02-11, 2026-02-12)가 리스트 형태로 나열되며, 각 날짜별로 독립적인 시작/종료 시간 및 근무지 구분을 설정할 수 있는 입력 폼이 표시됨

### TC-004: 출장신청서 작성 - 종일일정 선택
- **Given**: 사용자가 출장신청서 작성 화면에서 신청 시간을 설정하는 상태
- **When**: '종일일정' 체크박스를 선택
- **Then**: 시작/종료 시간 선택 필드가 비활성화되고, 시간 입력 없이 종일 일정으로 설정됨

### TC-005: 출장신청서 작성 - 여러 시간대 추가
- **Given**: 사용자가 출장신청서 작성 화면에서 신청 시간을 입력하는 상태
- **When**: '+ 추가' 버튼을 클릭하여 여러 시간대(09:00~12:00, 14:00~18:00)를 등록
- **Then**: 여러 시간대가 리스트 형태로 표시되며, 각 시간대를 개별적으로 수정/삭제할 수 있음

### TC-006: 재택근무신청서 작성 - 기본 정보 입력
- **Given**: 사용자가 웹 환경에서 전자결재 > 기안서 작성 > 재택근무신청서 화면에 접근한 상태
- **When**: 제목 "재택근무", 신청 기간 "2026-02-10", 신청 시간 "09:00 ~ 18:00"을 입력하고 상신 버튼을 클릭
- **Then**: 기안서가 성공적으로 상신되고, 결재선 지정자에게 푸시 알림이 발송되며, "상신 완료" 메시지가 표시됨

### TC-007: 외근신청서 작성 - 일정 자동 등록
- **Given**: 사용자가 외근신청서를 작성하여 상신한 상태
- **When**: 신청 완료(상신)
- **Then**: 해당 일정이 사용자 캘린더(USR-SCH)에 자동 등록되며, "외근 일정이 캘린더에 등록되었습니다" 메시지가 표시됨

### TC-008: 파견신청서 작성 - 일정 자동 등록
- **Given**: 사용자가 파견신청서를 작성하여 상신한 상태
- **When**: 신청 완료(상신)
- **Then**: 해당 일정이 사용자 캘린더(USR-SCH)에 자동 등록되며, "파견 일정이 캘린더에 등록되었습니다" 메시지가 표시됨

### TC-009: 시간외근무신청서 작성 - 순수 근무 시간 자동 계산
- **Given**: 사용자가 시간외근무신청서 작성 화면에서 근무일시를 입력하는 상태
- **When**: 근무 시작 시간 "18:00", 근무 종료 시간 "22:00", 휴게 시간 "30분"을 입력
- **Then**: 순수 근무시간이 "3시간 30분"으로 자동 계산되어 실시간으로 표시됨 (계산식: 4시간 - 30분 = 3시간 30분)

### TC-010: 시간외근무신청서 작성 - 휴일 근무 설정
- **Given**: 사용자가 시간외근무신청서 작성 화면에서 근무일시를 입력하는 상태
- **When**: 근무 날짜를 "2026-02-15" (토요일)로 선택하고 '휴일' 체크박스를 활성화
- **Then**: 휴일 근무로 표시되며, 휴일 근무 시간이 별도로 집계됨

### TC-011: 모바일 - 오늘 출장/외근 일정 조회
- **Given**: 사용자가 모바일 앱 메인 화면에 접근한 상태
- **When**: 오늘 날짜가 "2026-02-10"이고, 해당 날짜에 2건의 출장 일정이 등록되어 있음
- **Then**: 메인 화면 상단에 "오늘 출장/외근 일정: 2건"이 표시되며, 각 일정의 제목, 시작/종료 시간, 근무지 주소가 카드 형태로 나열됨

### TC-012: 모바일 - 일정 상세 정보 조회
- **Given**: 사용자가 모바일 메인 화면에서 출장 일정 카드를 확인한 상태
- **When**: 출장 일정 카드를 클릭
- **Then**: 일정 상세 모달이 열리며, 제목, 시작/종료 시간, 근무지 주소, 상세 내용, 메모 내역 탭 등이 표시됨

### TC-013: 모바일 - 일정 메모 작성
- **Given**: 사용자가 모바일 메인 화면에서 출장 일정 카드를 클릭하여 상세 모달을 연 상태
- **When**: 메모 내역 탭에서 "회의록 작성 완료"라는 메모를 입력하고 저장
- **Then**: 메모가 성공적으로 저장되며, 메모 내역 탭에서 조회/수정/삭제 가능

### TC-014: 모바일 - 일정 숨김 처리
- **Given**: 사용자가 모바일 메인 화면에서 출장 일정 카드를 확인한 상태
- **When**: 일정 카드의 X 버튼을 클릭
- **Then**: 해당 일정이 리스트에서 즉시 숨김 처리되며, 화면에서 사라짐

### TC-015: 모바일 - 일정 페이징 처리
- **Given**: 사용자가 모바일 메인 화면에 접근한 상태이고, 오늘 등록된 출장/외근 일정이 5건인 상태
- **When**: 메인 화면 스크롤
- **Then**: 일정이 3개씩 페이징 처리되어 표시되며, 스크롤을 통해 나머지 일정을 확인할 수 있음

## 예외 시나리오 (Exception Cases)

### TC-016: 출장신청서 작성 - 제목 미입력
- **Given**: 사용자가 출장신청서 작성 화면에서 신청 기간과 시간을 입력한 상태
- **When**: 제목을 입력하지 않고 상신 버튼을 클릭
- **Then**: "제목은 필수 입력 항목입니다"라는 오류 메시지가 표시되며, 상신이 차단됨

### TC-017: 시간외근무신청서 작성 - 종료 시간이 시작 시간보다 빠른 경우
- **Given**: 사용자가 시간외근무신청서 작성 화면에서 근무일시를 입력하는 상태
- **When**: 근무 시작 시간 "22:00", 근무 종료 시간 "18:00"을 입력
- **Then**: "종료 시간은 시작 시간보다 늦어야 합니다"라는 오류 메시지가 표시되며, 입력이 차단됨 (당일 종료 기준)

### TC-018: 출장신청서 작성 - 일정 변경 시 데이터 초기화 경고
- **Given**: 사용자가 출장신청서 작성 화면에서 제목, 신청 시간, 상세 내용을 이미 입력한 상태
- **When**: 신청 기간을 "2026-02-10 ~ 2026-02-11"에서 "2026-02-12 ~ 2026-02-13"으로 변경
- **Then**: "신청 기간을 변경하면 입력한 내용이 초기화될 수 있습니다. 계속하시겠습니까?"라는 경고 메시지가 표시되며, 사용자가 확인하면 데이터가 초기화됨

### TC-019: 외근신청서 작성 - 캘린더 자동 등록 실패
- **Given**: 사용자가 외근신청서를 작성하여 상신한 상태
- **When**: 캘린더 연동 API가 실패하여 일정이 자동 등록되지 않음
- **Then**: "일정 자동 등록에 실패했습니다. 캘린더에서 수동으로 일정을 등록해주세요"라는 오류 메시지가 표시됨

### TC-020: 출장신청서 작성 - 관련 문서 없음
- **Given**: 사용자가 출장신청서 작성 화면에서 관련 문서를 검색하는 상태
- **When**: 관련 문서 검색 결과가 없음
- **Then**: "관련 문서가 없습니다"라는 안내 문구가 표시됨

### TC-021: 모바일 - 오늘 출장/외근 일정 없음
- **Given**: 사용자가 모바일 앱 메인 화면에 접근한 상태
- **When**: 오늘 날짜에 등록된 출장/외근 일정이 없음
- **Then**: "오늘 예정된 출장/외근 일정이 없습니다"라는 안내 문구가 표시됨

### TC-022: 결재 상신 시 푸시 알림 발송 실패
- **Given**: 사용자가 출장신청서를 작성하여 상신한 상태
- **When**: 결재선 지정자에게 푸시 알림 발송이 실패함
- **Then**: 기안서는 정상적으로 상신되지만, 시스템 로그에 "푸시 알림 발송 실패" 로그가 기록되며, 이메일 알림이 대체 발송됨

### TC-023: 출장신청서 작성 - 파일 첨부 실패
- **Given**: 사용자가 출장신청서 작성 화면에서 파일을 첨부하는 상태
- **When**: 파일 크기가 허용 범위를 초과하거나 지원되지 않는 파일 형식을 첨부
- **Then**: "파일 크기가 너무 크거나 지원되지 않는 형식입니다"라는 오류 메시지가 표시되며, 첨부가 차단됨

### TC-024: 모바일 - 일정 메모 작성 실패
- **Given**: 사용자가 모바일 메인 화면에서 출장 일정 카드를 클릭하여 메모 내역 탭에 접근한 상태
- **When**: 네트워크 오류로 인해 메모 저장이 실패함
- **Then**: "메모 저장에 실패했습니다. 다시 시도해주세요"라는 오류 메시지가 표시됨

### TC-025: 출장신청서 작성 - 리치 텍스트 에디터 입력 제한 초과
- **Given**: 사용자가 출장신청서 작성 화면에서 상세 내용을 입력하는 상태
- **When**: 입력 단어 수가 허용 범위(예: 1,000단어)를 초과
- **Then**: "입력 가능한 단어 수를 초과했습니다 (현재: 1,050단어, 최대: 1,000단어)"라는 경고 메시지가 표시되며, 추가 입력이 차단됨

## 권한 시나리오 (Permission Cases)

### TC-026: 일반 직원 - 본인이 작성한 기안서만 조회
- **Given**: 일반 직원(권한: 일반 직원)이 웹 환경에서 전자결재 > 결재 현황 > 상신한 문서 화면에 접근한 상태
- **When**: 상신한 문서 목록을 조회
- **Then**: 본인이 작성한 기안서만 목록에 표시되며, 다른 직원이 작성한 기안서는 조회되지 않음

### TC-027: 결재자 - 결재할 문서 조회
- **Given**: 결재자(권한: 결재자)가 웹 환경에서 전자결재 > 결재 현황 > 결재할 문서 화면에 접근한 상태
- **When**: 결재할 문서 목록을 조회
- **Then**: 본인이 결재선에 포함된 기안서만 목록에 표시되며, 승인/반려 버튼이 활성화됨

### TC-028: 관리자 - 전체 결재 현황 조회
- **Given**: 관리자(권한: 관리자)가 웹 환경에서 전자결재 > 결재 현황 화면에 접근한 상태
- **When**: 전체 결재 현황을 조회
- **Then**: 전체 조직의 결재 현황이 목록에 표시되며, 통계 및 리포트 생성 기능을 사용할 수 있음

### TC-029: 일반 직원 - 다른 직원의 기안서 접근 시도
- **Given**: 일반 직원(권한: 일반 직원)이 웹 환경에서 다른 직원이 작성한 기안서의 URL에 직접 접근 시도
- **When**: 다른 직원의 기안서 상세 페이지 URL을 입력하여 접근
- **Then**: "권한이 없습니다. 본인이 작성한 기안서만 조회할 수 있습니다"라는 오류 메시지가 표시되며, 접근이 차단됨

### TC-030: 결재자 - 결재선에 포함되지 않은 기안서 접근 시도
- **Given**: 결재자(권한: 결재자)가 웹 환경에서 본인이 결재선에 포함되지 않은 기안서의 URL에 직접 접근 시도
- **When**: 결재선에 포함되지 않은 기안서 상세 페이지 URL을 입력하여 접근
- **Then**: "권한이 없습니다. 결재선에 포함된 기안서만 조회할 수 있습니다"라는 오류 메시지가 표시되며, 접근이 차단됨

## 추가 시나리오 (Additional Cases)

### TC-031: 출장신청서 작성 - 개별 설정 토글 비활성화
- **Given**: 사용자가 출장신청서 작성 화면에서 '개별 설정' 토글을 활성화하여 각 날짜별로 시간을 설정한 상태
- **When**: '개별 설정' 토글을 다시 비활성화
- **Then**: 날짜별 시간 설정 입력 폼이 사라지고, 신청 기간 전체에 대한 단일 시작/종료 시간 입력 폼으로 전환됨 (기존 입력 데이터가 초기화될 수 있음)

### TC-032: 모바일 - 근무지 상태 배지 동적 변경
- **Given**: 사용자가 모바일 메인 화면에 접근한 상태
- **When**: 사용자가 출장 일정을 시작하여 현재 근무 장소가 "출장"으로 변경됨
- **Then**: 메인 화면 우측 상단의 배지 컬러와 텍스트가 "출장"으로 동적으로 변경됨

### TC-033: 출장신청서 작성 - 신청 사유 캘린더 제목 자동 연동
- **Given**: 사용자가 출장신청서 작성 화면에서 신청 사유를 "서울 본사 방문"으로 입력하고 상신한 상태
- **When**: 신청 완료(상신)
- **Then**: 캘린더 일정 등록 시 제목이 "서울 본사 방문"으로 자동 설정됨

### TC-034: 시간외근무신청서 작성 - 휴게 시간 입력 후 순수 근무 시간 재계산
- **Given**: 사용자가 시간외근무신청서 작성 화면에서 근무 시작 시간 "18:00", 근무 종료 시간 "23:00"을 입력하여 순수 근무시간이 "5시간"으로 계산된 상태
- **When**: 휴게 시간을 "30분"으로 입력
- **Then**: 순수 근무시간이 "4시간 30분"으로 재계산되어 실시간으로 표시됨

### TC-035: 재택근무신청서 작성 - 개별 설정 기능 사용 (다중 날짜)
- **Given**: 사용자가 재택근무신청서 작성 화면에서 신청 기간을 "2026-02-10 ~ 2026-02-14" (5일)로 선택한 상태
- **When**: '개별 설정' 토글을 활성화하고, 각 날짜별로 다른 시작/종료 시간(2/10: 09:00~18:00, 2/11: 10:00~19:00, 2/12: 09:00~15:00, 2/13: 종일일정, 2/14: 13:00~18:00)을 설정
- **Then**: 각 날짜별로 설정한 시작/종료 시간이 정상적으로 저장되며, 상신 시 날짜별 시간 정보가 결재 문서에 반영됨

## 변경점

| 항목 | 카탈로그 | 이슈 |
|------|----------|------|
| 일정 변경 시 데이터 초기화 | 명시되지 않음 | 일정 변경 시 기존 데이터가 초기화될 수 있으므로, TC-018에서 경고 메시지 표시 테스트 케이스 추가 |
| 푸시 알림 기능 | USR-APR-16에서 "결재 상신 시 결재선 지정자에게 푸시 알림 발송"이라고 명시 | TC-001, TC-006에서 푸시 알림 발송 검증 케이스 추가, TC-022에서 푸시 알림 발송 실패 예외 케이스 추가 |
